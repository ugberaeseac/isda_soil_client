# iSDASoil Client - Coding Exercise

## Overview
This project is a **Python command-line tool** that integrates with the **iSDAsoil API** and **GroqCloud LLM** to provide **basic fertilizer recommendations** for farmers in Africa.  

The script:
- Authenticates with the iSDAsoil API  
- Fetches soil property data (Nitrogen, Phosphorus, Potassium, pH) for a given location and depth  
- Classifies soil nutrient levels into **LOW**, **MODERATE**, or **HIGH**  
- Uses **Groq’s LLM** to generate a simple fertilizer recommendation, limited to approved fertilizers  

---

## Tech Stack
- **Python 3.10+**  
- [Requests](https://docs.python-requests.org/) – HTTP requests  
- [python-dotenv](https://pypi.org/project/python-dotenv/) – environment variable management  
- **iSDAsoil API** – soil data source  
- **Groq LLM API** – natural language recommendation engine  

---

## Setup

1. Clone the repository:
   ```bash
   git clone https://github.com/ugberaeseac/isda-soil-client.git
   cd isda-soil-client
   ```

2. Create and activate a virtual environment:
   ```bash
   python -m venv venv
   source venv/bin/activate   # Linux/macOS
   venv\Scripts\activate      # Windows
   ```

3. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```

4. Copy `.env.sample` to `.env` and fill in your credentials:
   ```bash
   cp .env.sample .env
   ```

---

## Environment Variables
In your `.env` file:

```ini
# iSDAsoil API settings
BASE_URL="https://api.isda-africa.com"

# iSDAsoil login credentials
ISDA_EMAIL="your_email@example.com"
ISDA_PASSWORD="your_password_here"

# Groq API settings
GROQ_API_KEY="your_groq_api_key_here"
GROQ_API_URL="https://api.groq.com/openai/v1/chat/completions"
```

---

## Usage

Run the client script:
```bash
python run_client.py
```

You’ll be prompted for:
- **Latitude** (decimal degrees)  
- **Longitude** (decimal degrees)  
- **Depth** (currently only `0-20` supported)  

Example interaction:
```bash
Enter lattitude of the location in Africa:    -0.7196
Enter longitude of the location in Africa:    35.2400
Enter the depth:    0-20
```

---

## Example Output

```text
The soil classification results are:
- Nitrogen: MODERATE
- Phosphorus: MODERATE
- Potassium: HIGH
- pH: MODERATE


Based on the soil classification results, here's a basic fertilizer recommendation:

1. Nitrogen (N): Since the soil has a moderate level of Nitrogen, apply Urea (46-0-0) at a moderate rate to maintain the nitrogen level. 
2. Phosphorus (P): With a moderate level of Phosphorus, apply Single Super Phosphate to provide a moderate amount of phosphorus.
3. Potassium (K): The soil already has a high level of Potassium, so no additional potassium fertilizer (Muriate of Potash or Sulphate of Potash) is needed.
4. pH: Since the pH is moderate, no Lime is needed to adjust the pH level.

Recommended fertilizer application:
- Urea (46-0-0)
- Single Super Phosphate

This combination will help maintain the nitrogen level and provide a moderate amount of phosphorus, while avoiding unnecessary application of potassium and pH adjustment.
```

---

## Notes
- The script uses a **bounding box check** to ensure coordinates are in Africa.  
- Only **topsoil depth (0–20 cm)** is currently supported.  
- Fertilizer recommendations are generated by Groq LLM and restricted to approved options.  